const translations = {
    es: {
        // Navegación
        nav: {
            home: 'Inicio',
            about: 'Sobre Mi',
            skills: 'Habilidades',
            experience: 'Experiencia',
            portfolio: 'Portfolio',
            contact: 'Contáctame',
            articles: 'Artículos'
        },
        // Hero Section
        hero: {
            iam: 'Yo soy',
            name: 'Michel Abello',
            roles: 'Científico de Datos, Administrador de Empresas, Especialista en Automatización, Analista de Datos, Analista de Inteligencia',
            aboutBtn: 'Sobre Mi',
            contactBtn: 'Contáctame'
        },
        // About Section
        about: {
            title: 'SOBRE MÍ',
            subtitle: '¿QUIÉN SOY?',
            description: '¡Hola! Soy Michel Abello, administrador de empresas; Como analista de datos con sólidos conocimientos de Python, SQL y Excel avanzado con gestión de macros, tengo una capacidad excepcional para extraer, limpiar y analizar datos complejos de forma eficaz. Mi objetivo profesional es aplicar estas habilidades para transformar datos en conocimientos significativos que impulsen la toma de decisiones estratégicas. Busco colaborar en un entorno dinámico donde pueda utilizar mi experiencia en análisis de datos para resolver problemas de negocio y contribuir al crecimiento y éxito de la organización.',
            downloadCV: 'Descargar CV',
            learnMore: 'Conoce más'
        },
        // Service Section
        service: {
            title: 'MIS SERVICIOS',
            subtitle: 'Lo que Ofrezco',
            webDesign: 'Diseño Web',
            webDesignDesc: 'Creación de sitios web modernos y responsivos con las últimas tecnologías',
            webDev: 'Desarrollo Web',
            webDevDesc: 'Desarrollo de aplicaciones web robustas y escalables',
            appsDesign: 'Diseño de Apps',
            appsDesignDesc: 'Diseño de interfaces intuitivas para aplicaciones móviles y web',
            appsDev: 'Desarrollo de Apps',
            appsDevDesc: 'Desarrollo de aplicaciones nativas y multiplataforma'
        },
        // Experience Section
        experience: {
            title: 'MI EXPERIENCIA',
            subtitle: 'Trayectoria Profesional',
            // Agregar experiencias específicas aquí
        },
        // Banner Section
        banner: {
            title: 'Disponible para proyectos freelance',
            description: 'Trabajo remoto, a tiempo parcial o completo',
            hireMe: 'Contrátame'
        },
        // Portfolio Section
        portfolio: {
            title: 'Mi Portfolio',
            subtitle: 'Portfolio de Trabajos',
            filterAll: 'Todo',
            filterWeb: 'Diseño Web',
            filterData: 'Análisis de Datos',
            filterBrand: 'Diseño de Marca',
            filterAutomation: 'Automatización de procesos'
        },
        // Project titles
        projects: {
            webEcobambu: 'Aseo Eco Bambu Web',
            pgChallenge: 'P&G CEO Challenge 2021',
            stockPortfolio: 'Portafolio de Acciones',
            wissen: 'Wissen',
            ecobambu: 'Aseo Eco Bambu',
            dataViewer: 'Data Viewer',
            tpAnalysis: 'Análisis de Indicadores',
            alianza: 'Alianza Service',
            formAutomation: 'Automatización Formato Único de Notificación',
            contractAutomation: 'Automatización Contrato Propiedad Horizontal',
            wtwCategorization: 'WTW / Categorización por Vademecum',
            cenitDashboard: 'Dashboard reporte general CENIT',
            emailAutomation: 'Automatización de envío de KPI por correo',
            sqlValidator: 'Validador de importadores de SQL',
            dataEntry: 'Automatización de ingreso de datos',
            ecopetrolAPI: 'Automatización API visual Ecopetrol'
        },
        // Contact Section
        contact: {
            title: 'CONTÁCTAME',
            subtitle: 'Conectemos y Trabajemos Juntos',
            linkedin: 'LinkedIn',
            linkedinDesc: 'Conéctate conmigo profesionalmente',
            viewProfile: 'Ver Perfil',
            github: 'GitHub',
            githubDesc: 'Revisa mis proyectos de código',
            viewRepos: 'Ver Repositorios',
            behance: 'Behance',
            behanceDesc: 'Explora mi trabajo de diseño',
            viewPortfolio: 'Ver Portfolio',
            available: 'Disponible para nuevos proyectos',
            availableDesc: 'Abierto a oportunidades de colaboración'
        },
        // Articles Section
        articles: {
            title: 'PUBLICACIONES',
            subtitle: 'Últimos Artículos',
            article1Title: 'Análisis de Datos con Python',
            article1Desc: 'Guía completa sobre análisis de datos utilizando Python y sus principales librerías',
            article2Title: 'Automatización de Procesos',
            article2Desc: 'Mejores prácticas para automatizar flujos de trabajo empresariales',
            viewDocument: 'Ver Documento Completo',
            viewSummary: 'Ver Resumen'
        },
        // Footer
        footer: {
            rights: 'Todos los derechos reservados',
            designed: 'Diseñado por'
        }
    },
    en: {
        // Navigation
        nav: {
            home: 'Home',
            about: 'About Me',
            skills: 'Skills',
            experience: 'Experience',
            portfolio: 'Portfolio',
            contact: 'Contact Me',
            articles: 'Articles'
        },
        // Hero Section
        hero: {
            iam: 'I am',
            name: 'Michel Abello',
            roles: 'Data Scientist, Business Administrator, Automation Specialist, Data Analyst, Intelligence Analyst',
            aboutBtn: 'About Me',
            contactBtn: 'Contact Me'
        },
        // About Section
        about: {
            title: 'ABOUT ME',
            subtitle: 'WHO AM I?',
            description: 'Hello! I am Michel Abello, a business administrator; As a data analyst with strong knowledge of Python, SQL and advanced Excel with macro management, I have an exceptional ability to extract, clean and analyze complex data effectively. My professional goal is to apply these skills to transform data into meaningful insights that drive strategic decision making. I seek to collaborate in a dynamic environment where I can use my data analysis experience to solve business problems and contribute to the growth and success of the organization.',
            downloadCV: 'Download CV',
            learnMore: 'Learn More'
        },
        // Service Section
        service: {
            title: 'MY SERVICES',
            subtitle: 'What I Offer',
            webDesign: 'Web Design',
            webDesignDesc: 'Creation of modern and responsive websites with the latest technologies',
            webDev: 'Web Development',
            webDevDesc: 'Development of robust and scalable web applications',
            appsDesign: 'Apps Design',
            appsDesignDesc: 'Design of intuitive interfaces for mobile and web applications',
            appsDev: 'Apps Development',
            appsDevDesc: 'Development of native and cross-platform applications'
        },
        // Experience Section
        experience: {
            title: 'MY EXPERIENCE',
            subtitle: 'Professional Journey'
        },
        // Banner Section
        banner: {
            title: 'Available for freelance projects',
            description: 'Remote work, part-time or full-time',
            hireMe: 'Hire Me'
        },
        // Portfolio Section
        portfolio: {
            title: 'My Portfolio',
            subtitle: 'Portfolio of Works',
            filterAll: 'All',
            filterWeb: 'Web Design',
            filterData: 'Data Analysis',
            filterBrand: 'Brand Design',
            filterAutomation: 'Process Automation'
        },
        // Project titles
        projects: {
            webEcobambu: 'Eco Bambu Cleaning Web',
            pgChallenge: 'P&G CEO Challenge 2021',
            stockPortfolio: 'Stock Portfolio',
            wissen: 'Wissen',
            ecobambu: 'Eco Bambu Cleaning',
            dataViewer: 'Data Viewer',
            tpAnalysis: 'Indicators Analysis',
            alianza: 'Alianza Service',
            formAutomation: 'Single Notification Form Automation',
            contractAutomation: 'Horizontal Property Contract Automation',
            wtwCategorization: 'WTW / Categorization by Vademecum',
            cenitDashboard: 'CENIT General Report Dashboard',
            emailAutomation: 'KPI Email Sending Automation',
            sqlValidator: 'SQL Importer Validator',
            dataEntry: 'Data Entry Automation',
            ecopetrolAPI: 'Ecopetrol Visual API Automation'
        },
        // Contact Section
        contact: {
            title: 'CONTACT ME',
            subtitle: "Let's Connect and Work Together",
            linkedin: 'LinkedIn',
            linkedinDesc: 'Connect with me professionally',
            viewProfile: 'View Profile',
            github: 'GitHub',
            githubDesc: 'Check out my code projects',
            viewRepos: 'View Repositories',
            behance: 'Behance',
            behanceDesc: 'Explore my design work',
            viewPortfolio: 'View Portfolio',
            available: 'Available for new projects',
            availableDesc: 'Open to collaboration opportunities'
        },
        // Articles Section
        articles: {
            title: 'PUBLICATIONS',
            subtitle: 'Latest Articles',
            article1Title: 'Data Analysis with Python',
            article1Desc: 'Complete guide on data analysis using Python and its main libraries',
            article2Title: 'Process Automation',
            article2Desc: 'Best practices for automating business workflows',
            viewDocument: 'View Full Document',
            viewSummary: 'View Summary'
        },
        // Footer
        footer: {
            rights: 'All rights reserved',
            designed: 'Designed by'
        }
    }
};

class I18n {
    constructor() {
        this.currentLang = this.detectLanguage();
        this.init();
    }

    detectLanguage() {
        const savedLang = localStorage.getItem('preferredLanguage');
        if (savedLang && (savedLang === 'es' || savedLang === 'en')) {
            return savedLang;
        }
        const browserLang = navigator.language || navigator.userLanguage;
        return browserLang.startsWith('es') ? 'es' : 'en';
    }

    init() {
        this.updatePageLanguage();
        this.setupLanguageToggle();
    }

    setLanguage(lang) {
        if (lang !== 'es' && lang !== 'en') return;
        this.currentLang = lang;
        localStorage.setItem('preferredLanguage', lang);
        this.updatePageLanguage();
    }

    toggleLanguage() {
        const newLang = this.currentLang === 'es' ? 'en' : 'es';
        this.setLanguage(newLang);
    }

    translate(key) {
        const keys = key.split('.');
        let value = translations[this.currentLang];
        for (const k of keys) {
            value = value?.[k];
        }
        return value || key;
    }

    updatePageLanguage() {
        document.documentElement.lang = this.currentLang;

        // Actualizar elementos con data-i18n
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            const translation = this.translate(key);
            
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                element.placeholder = translation;
            } else {
                element.textContent = translation;
            }
        });

        // Actualizar elementos con data-es y data-en
        document.querySelectorAll('[data-es][data-en]').forEach(element => {
            const content = this.currentLang === 'es' 
                ? element.getAttribute('data-es') 
                : element.getAttribute('data-en');
            
            // Preservar HTML interno si existe
            if (element.innerHTML.includes('<')) {
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = content;
                element.textContent = tempDiv.textContent;
            } else {
                element.textContent = content;
            }
        });

        this.updateLanguageToggle();
    }

    setupLanguageToggle() {
        const toggle = document.querySelector('.language-toggle');
        if (toggle) {
            toggle.addEventListener('click', () => this.toggleLanguage());
        }
    }

    updateLanguageToggle() {
        const toggle = document.querySelector('.language-toggle');
        if (toggle) {
            const langText = toggle.querySelector('.lang-text');
            if (langText) {
                langText.textContent = this.currentLang.toUpperCase();
            }
            toggle.setAttribute('aria-label', 
                this.currentLang === 'es' ? 'Switch to English' : 'Cambiar a Español'
            );
        }
    }

    getCurrentLanguage() {
        return this.currentLang;
    }
}

// Inicializar
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
        window.i18n = new I18n();
    });
} else {
    window.i18n = new I18n();
}
